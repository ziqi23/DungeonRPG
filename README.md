## Overview

Last One Standing is a role-playing game set in a post-apocalyptic world. As the main character, you wake up one day to find a deadly virus has swept through your town. You scramble outside but see no signs of life. Being the strong willed person that you are, you hold on to the last glimmer of hope and set out to find other survivors.

Click [here](https://ziqi23.github.io/Last-One-Standing) to play now!

## Basic Controls

Movement: `Left Mouse Button` <br>
Aim/Shoot: `1 & 2` <br>
Target/Select Enemy: `Tab` <br>
Drink Potions: `Q & E` <br>
Mute/Unmute: `M`

## Library Usage

`Three.js` - Utilized for creating elements of the game world and rendering its contents. Specifically, the following elements were created using this library:

### Main Components
1. the `camera`, the coordinates of which represent the player's viewpoint.
2. the `scene`, where all models live.
3. the `light`, which illuminates the scene.
4. the `built-in 3d models`, which were created using the library's built in geometries.
5. the `external 3D models`, which were imported using the `OBJLoader` and `FBXLoader` functionality.

### Supporting Components
1. THREE.Raycaster - assists in determining the coordinate at which the player's cursor is pointing.
2. THREE.AnimationMixer, THREE.AnimationClip, THREE.AnimationAction - creates an environment to play or pause animations.
3. THREE.Clock - implements an internal clock to keep track of game time allowing for dynamic game design such as animations playback and cooldown between abilities.
   
## Key Features

### 1. RPG Elements
Inspired by traditional RPG games, `Space Defense` showcases different skills (attack patterns) that can be toggled between by the player, an experience system increasing based on the number of enemies eliminated, HP and MP bars as well as potions.

The UI class tracks all of the above attributes, and within each frame of the game rendering, updates the UI display through DOM manipulation to dynamically present accurate HP, MP and EXP data.

<br>

Dynamically update HP potion count
```js
if (document.getElementById("potion-count")) {
    document.getElementById("potion-count").innerHTML = `${this.potions}`;
} else {
    let potionCount = document.createElement("h1");
    potionCount.setAttribute("id", "potion-count");
    potionCount.innerHTML = `${this.potions}`;
    potionCount.style.position = 'absolute';
    potionCount.style.zIndex = "40";
    document.getElementById("ui").appendChild(potionCount);
}
```

<br>

Dynamically update HP bar display based on current health
```
let health = document.getElementById("hp-img");
health.style.height = `${this.health / 100 * 215}px`
```

### 2. Player Movement

Movement is simulated by listening for keydown events and shifting the player's position as well as the camera's position accordingly. Player can move in eight directions and can also jump. Gravity is simulated by gradually decreasing the player's y coordinate until it collides with another object.

Upon keypress:
```js
if (this.movementState.jump && Math.floor(box6.position.y) === 0) {
    box6.position.y += 3;
    this.movementState.jump = false;
} else {
    this.movementState.jump = false;
}
```

<br>

Within each frame:
```js
if (objects.box6.position.y - 1.5 > plane.position.y) {
    objects.box6.position.y += -0.05;
}
```
            
### 3. Projectile and Collision Management

Projectiles in the game may be generated by either the player or the enemies. Projectiles are initially fixed to the position where they were generated (i.e. player's position or enemy position). After generation, `THREE.Raycaster` is used to determine the direction at which the projectile fires at.

In each frame, projectiles are moved based on their set direction. Either collision logic or removal logic may be triggered to handle these projectiles if they collide with another object or fly too far away from the scene.

## Attributions
